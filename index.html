<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fun Lines</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body.dark {
            background-color: #1f2937;
            color: #e5e7eb;
        }

        body.dark nav {
            background-color: #1f2937;
            color: #e5e7eb;
        }

        body.dark .line {
            border-bottom-color: #4b5563;
        }

        body.dark .line:hover {
            background-color: #374151;
        }

        body.dark .highlight {
            background-color: #4b5563;
        }

        body.dark .btn {
            background-color: #3b82f6;
            border-color: #3b82f6;
        }

        body.dark .btn:hover {
            background-color: #2563eb;
            border-color: #2563eb;
        }

        body.dark .progress-bar {
            background-color: #4b5563;
        }

        body.dark .progress {
            background-color: #3b82f6;
        }

        body.dark .modal-content, body.dark .fact-box {
            background-color: #1f2937;
            color: #e5e7eb;
        }

        body.dark .close {
            color: #e5e7eb;
        }

        body.dark .theme-toggle {
            background-color: #ffffff;
            color: #1f2937;
        }

        body.dark .theme-toggle:hover {
            background-color: #e5e7eb;
        }

        body.dark #lines-container {
            background-color: #1f2937;
            border: 5px solid;
            border-image: linear-gradient(45deg, #ff6f61, #f0c27b, #4d9f0c, #374c89, #9e43a2) 1;
            border-radius: 15px; /* Rounded corners */
        }

        .line {
            padding: 12px;
            border-bottom: 1px solid #d1d5db;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .line:hover {
            background-color: #f3f4f6;
            transform: scale(1.02);
        }

        .highlight {
            background-color: #fef3c7;
            font-weight: bold;
        }

        .hidden {
            display: none;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s;
            background-color: #007bff;
            color: white;
            border: 1px solid #007bff;
        }

        .btn:hover {
            background-color: #0056b3;
            border-color: #0056b3;
            transform: scale(1.05);
        }

        .progress-bar {
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background-color: #10b981;
            width: 0;
            transition: width 0.3s ease;
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .tooltip {
            position: relative;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #374151;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .animated-icon {
            font-size: 1.5rem;
            margin-left: 10px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        nav {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s;
        }

        body.dark nav {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .modal-content.show {
            opacity: 1;
            transform: translateY(0);
        }

        .fact-box {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            padding: 15px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .fact-box.show {
            opacity: 1;
            transform: translateY(0);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .theme-toggle {
            margin-left: auto;
            padding: 8px;
            border-radius: 4px;
            background-color: #ffffff;
            color: #1f2937;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            transition: background-color 0.3s, color 0.3s;
        }

        .theme-toggle:hover {
            background-color: #e5e7eb;
        }

        body.dark .theme-toggle {
            background-color: #1f2937;
            color: #ffffff;
        }

        body.dark .theme-toggle:hover {
            background-color: #374151;
        }

        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-900">
    <!-- Navbar -->
    <nav class="bg-white text-gray-900 p-4 sticky top-0 z-50 shadow-md flex justify-between items-center">
        <div class="container mx-auto flex items-center">
            <h1 class="text-2xl font-bold">Fun Lines</h1>
            <!-- Theme Toggle Button -->
            <button id="theme-toggle" class="theme-toggle">🌙</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="h-screen flex items-center justify-center text-white text-center shadow-xl transition-colors duration-300" id="hero">
        <div>
            <h2 class="text-5xl font-bold">Fun Interactive Experience</h2>
            <p class="mt-4 text-xl">Scroll down to explore 500+ lines of engaging content!</p>
        </div>
    </section>

    <!-- Interactive 500 Lines -->
    <section id="content" class="container mx-auto p-12">
        <h2 class="text-3xl font-semibold text-center mb-6">Scroll to Discover</h2>
        <div class="progress-bar mb-4">
            <div id="progress" class="progress"></div>
        </div>
        <div id="lines-container" class="bg-white shadow-lg p-6 overflow-auto h-[60vh] border rounded-lg no-scrollbar"></div>
    </section>

    <!-- Modal Structure -->
    <div id="modal" class="modal">
        <div id="modal-content" class="modal-content">
            <span class="close">&times;</span>
            <p id="modal-text"></p>
            <input type="text" id="modal-input" class="hidden border p-2 mt-4 w-full rounded">
        </div>
    </div>

    <!-- Fact Box -->
    <div id="fact-box" class="fact-box">
        <span class="close">&times;</span>
        <p id="fact-text"></p>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <script>
        const container = document.getElementById("lines-container");
        const progressBar = document.getElementById("progress");
        const modal = document.getElementById("modal");
        const modalContent = document.getElementById("modal-content");
        const modalText = document.getElementById("modal-text");
        const modalInput = document.getElementById("modal-input");
        const closeModal = document.getElementsByClassName("close")[0];
        const factBox = document.getElementById("fact-box");
        const factText = document.getElementById("fact-text");
        const closeFactBox = factBox.getElementsByClassName("close")[0];
        const heroSection = document.getElementById("hero");
        const themeToggle = document.getElementById("theme-toggle");
        const confettiCanvas = document.getElementById("confetti-canvas");
        const confettiCtx = confettiCanvas.getContext("2d");
        let confettiAnimation;

        const secrets = ["Hidden Treasure!", "Secret Code: 42", "Easter Egg Found!", "Lucky Number: 7", "Bonus Points!", "Mystery Solved!", "Hidden Feature Unlocked!", "You've Discovered Magic!", "Special Message!", "Golden Line!"];
        const facts = ["The shortest war in history lasted 38 minutes.", "A day on Venus is longer than a year on Venus.", "Honey never spoils.", "Bananas are slightly radioactive.", "Cows have best friends.", "The Eiffel Tower can be 15 cm taller during the summer due to the expansion of the iron on hot days.", "A cloud of underground bacteria in New Mexico is as big as the state of Rhode Island."];
        const jokes = ["Why don't scientists trust atoms? Because they make up everything!", "What do you call fake spaghetti? An impasta.", "How does the moon cut his hair? Eclipse it.", "What do you call a can opener that doesn't work? A can't opener.", "How many tickles does it take to make an octopus laugh? Ten-tickles."];
        const quotes = ["The only way to do great work is to love what you do. — Steve Jobs", "In three words I can sum up everything I've learned about life: it goes on. — Robert Frost", "The purpose of our lives is to be happy. — Dalai Lama", "Life is what happens when you're busy making other plans. — John Lennon", "Get busy living or get busy dying. — Stephen King"];

        function loadLines() {
            for (let i = 1; i <= 500; i++) {
                const line = document.createElement("div");
                line.className = "line";
                line.innerHTML = `Line ${i} <button class='btn' onclick='handleLineClick(${i})'>Click</button>`;
                line.style.fontSize = `${Math.random() * 6 + 14}px`;
                line.draggable = true;

                if (Math.random() < 0.02) {
                    line.onclick = () => {
                        showFactBox(secrets[Math.floor(Math.random() * secrets.length)]);
                    };
                } else if (Math.random() < 0.05) {
                    line.innerHTML += ` <span class="animated-icon">🎉</span>`;
                } else if (Math.random() < 0.05) {
                    line.onclick = () => {
                        showFactBox(facts[Math.floor(Math.random() * facts.length)]);
                    };
                } else if (Math.random() < 0.05) {
                    line.onclick = () => {
                        showFactBox(jokes[Math.floor(Math.random() * jokes.length)]);
                    };
                } else if (Math.random() < 0.05) {
                    line.onclick = () => {
                        showFactBox(quotes[Math.floor(Math.random() * quotes.length)]);
                    };
                } else if (Math.random() < 0.05) {
                    line.onclick = () => {
                        showModalWithInput("What is the capital of France?", (answer) => {
                            if (answer.toLowerCase() === "paris") {
                                showFactBox("Correct!");
                            } else {
                                showFactBox("Wrong! The capital of France is Paris.");
                            }
                        });
                    };
                }

                container.appendChild(line);
            }
        }

        container.addEventListener("scroll", () => {
            const scrollPercentage = (container.scrollTop / (container.scrollHeight - container.clientHeight)) * 100;
            progressBar.style.width = `${scrollPercentage}%`;

            if (container.scrollTop + container.clientHeight >= container.scrollHeight && !confettiAnimation) {
                startConfetti();
            }
        });

        function handleLineClick(lineNumber) {
            const line = container.children[lineNumber - 1];
            if (lineNumber <= 100) {
                line.style.backgroundColor = "#cd7f32"; // Bronze
            } else if (lineNumber <= 250) {
                line.style.backgroundColor = "#c0c0c0"; // Silver
            } else {
                line.style.backgroundColor = "#ffd700"; // Gold
            }
            line.style.color = "black";
            line.querySelector("button").innerText = "Clicked!";
        }

        function getRandomColor() {
            const letters = "0123456789ABCDEF";
            let color = "#";
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function showModal(message) {
            modalText.textContent = message;
            modalInput.classList.add("hidden");
            modal.style.display = "block";
            modalContent.classList.add("show");
        }

        function showModalWithInput(question, callback) {
            modalText.textContent = question;
            modalInput.classList.remove("hidden");
            modalInput.value = "";
            modalInput.focus();
            modal.style.display = "block";
            modalContent.classList.add("show");

            modalInput.onkeydown = (event) => {
                if (event.key === "Enter") {
                    modal.style.display = "none";
                    modalContent.classList.remove("show");
                    callback(modalInput.value);
                }
            };
        }

        function showFactBox(message) {
            factText.textContent = message;
            factBox.classList.add("show");
        }

        closeModal.onclick = () => {
            modal.style.display = "none";
            modalContent.classList.remove("show");
        };

        closeFactBox.onclick = () => {
            factBox.classList.remove("show");
        };

        window.onclick = (event) => {
            if (event.target == modal) {
                modal.style.display = "none";
                modalContent.classList.remove("show");
            }
            if (event.target == factBox) {
                factBox.classList.remove("show");
            }
        };

        function setRandomGradient() {
            const color1 = "#6a11cb"; // Darker purple
            const color2 = "#2575fc"; // Darker blue
            const color3 = "#2a9d8f"; // Darker teal
            heroSection.style.background = `linear-gradient(to right, ${color1}, ${color2}, ${color3})`;
        }

        function toggleTheme() {
            document.body.classList.toggle("dark");
            themeToggle.innerHTML = document.body.classList.contains("dark") ? "☀️" : "🌙";
        }

        function startConfetti() {
            const confettiCount = 100;
            const confettiColors = ["#FF5733", "#33FF57", "#3357FF", "#F3FF33", "#FF33F6"];
            const confettiArray = [];

            confettiCanvas.width = window.innerWidth;
            confettiCanvas.height = window.innerHeight;

            for (let i = 0; i < confettiCount; i++) {
                const confetti = {
                    x: Math.random() * confettiCanvas.width,
                    y: confettiCanvas.height, // Start from the bottom
                    size: Math.random() * 5 + 2,
                    color: confettiColors[Math.floor(Math.random() * confettiColors.length)],
                    velocityX: (Math.random() - 0.5) * 3,
                    velocityY: -(Math.random() * 5 + 5) // Move upwards
                };
                confettiArray.push(confetti);
            }

            function updateConfetti() {
                confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                confettiArray.forEach((confetti, index) => {
                    confetti.x += confetti.velocityX;
                    confetti.y += confetti.velocityY;
                    confetti.velocityY += 0.05;

                    if (confetti.y > confettiCanvas.height) {
                        confetti.y = 0;
                        confetti.velocityY = -(Math.random() * 5 + 5);
                    }

                    confettiCtx.fillStyle = confetti.color;
                    confettiCtx.fillRect(confetti.x, confetti.y, confetti.size, confetti.size);
                });

                confettiAnimation = requestAnimationFrame(updateConfetti);
            }

            updateConfetti();
            setTimeout(() => {
                cancelAnimationFrame(confettiAnimation);
                confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                confettiAnimation = null;
            }, 2000);
        }

        themeToggle.addEventListener("click", toggleTheme);

        // Load lines progressively
        loadLines();
        setRandomGradient();

        // Ensure the canvas size is updated on window resize
        window.addEventListener("resize", () => {
            confettiCanvas.width = window.innerWidth;
            confettiCanvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
